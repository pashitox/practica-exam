const router = require('express').Router();
const listBooks = require('../controllers/02-controller');
// No modificar arriba de esta l√≠nea

/*
  9Ô∏è‚É£ ***EJERCICIO 9*** GET /books 9Ô∏è‚É£
      ‚ùï CONSIGNA ‚ùï
    1 - Integrar la funci√≥n listBooks que desarrollaste previamente para obtener los libros.
    2 - Responder con los resultados encontrados
    üì¢ PUNTOS A TENER EN CUENTA üì¢
    - Si algo falla al traer las categor√≠as, debes responder con un status code 400 y el mensaje del error!
*/

// router.get('/books', (req, res) => {});
router.get("/books", (req, res) => {
  if (req.query.title) {
    try {
      const books = listBooks(req.query.title);
      res.status(200).json(books);
    } catch (error) {
      res.status(400).json({ err: error.message });
    }
  } else {
    try {
      const books = listBooks();
      res.status(200).json(books);
    } catch (error) {
      res.status(400).json({ err: error.message });
    }
  }
});
  
// No modificar nada debajo de esta l√≠nea
module.exports = router;
